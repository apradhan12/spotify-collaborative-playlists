(this["webpackJsonpspotify-collaborative-playlists"]=this["webpackJsonpspotify-collaborative-playlists"]||[]).push([[0],{60:function(e,t,s){},68:function(e,t,s){},69:function(e,t,s){},70:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s.n(a),r=s(29),i=s.n(r),c=(s(60),s(14)),o=s(15),d=s(12),l=s(17),h=s(16),j=s(75),u=s(78),m=s(74),b=s(9),p=s(7),O=s(81),x=s(80),g=s(73),y=s(10),v=s(79),f=s(52),S=s(72),w={aaron1200:{username:"aaron1200",displayName:"Aaron Pradhan",profilePictureURL:"/aaron1200.jpg",playlistIds:["abc"],followers:20,following:31},joeiscool:{username:"joeiscool",displayName:"Joe Adams",profilePictureURL:"/joe.jpg",playlistIds:[],followers:39,following:13},michelle1721:{username:"michelle1721",displayName:"Michelle Thompson",profilePictureURL:"/michelle.jpg",playlistIds:[],followers:1203,following:101},noah2111:{username:"noah2111",displayName:"Noah Smith",profilePictureURL:"/noah.jpg",playlistIds:[],followers:12,following:11},hci2021:{username:"hci2021",displayName:"HCI Testing Account",profilePictureURL:"/hci.jpg",playlistIds:[],followers:12,following:42}},R={123:{id:"123",title:"(Don't Fear) The Reaper",artist:"Blue \xd6yster Cult",album:"Agents of Fortune",duration:308},456:{id:"456",title:"Don't Stop Me Now",artist:"Queen",album:"Jazz",duration:209},s1:{id:"s1",title:"Get Back",artist:"The Beatles",album:"Let It Be",duration:187},s2:{id:"s2",title:"Revolution",artist:"The Beatles",album:"The Beatles 1967 - 1970",duration:205},s3:{id:"s3",title:"Bangarang",artist:"Skrillex",album:"Bang!",duration:181},s4:{id:"s4",title:"Hero",artist:"Pegboard Nerds",album:"Hero",duration:222},s5:{id:"s5",title:"Life in Grey",artist:"Point Point",album:"Contrastive Focus Reduplication",duration:224},s6:{id:"s6",title:"Let it Be",artist:"The Beatles",album:"Let it Be",duration:243},s7:{id:"s7",title:"Baby",artist:"Justin Bieber",album:"My World 2.0",duration:215},s8:{id:"s8",title:"Sonata Pathetique: Movement 1",artist:"Ludwig van Beethoven",album:"Beethoven: Piano Sonatas",duration:400},s9:{id:"s9",title:"Take Five",artist:"The Dave Brubeck Quartet",album:"Time Out",duration:324}},A={abc:{id:"abc",title:"60s/70s Rock",pictureURL:"/album.jpg",description:"Best rock songs of the 1960s and 1970s",songIds:["123","456","s7"],creator:"aaron1200",admins:["joeiscool","michelle1721"],addRequests:[{id:"r1",song:R.s1,usersVoted:["jack1298","carol1522","hd123","bigdolphin"]},{id:"r2",song:R.s2,usersVoted:["jack1298","carol1522","hd123"]}],removeRequests:[{id:"r1",song:R[456],usersVoted:["jack1298","carol1522","hd123"]}]},def:{id:"def",title:"Hype EDM",pictureURL:"/bike.jpg",description:"Big bass drops and crazy synths",songIds:["s3"],creator:"hci2021",admins:["joeiscool","michelle1721"],addRequests:[{id:"r1",song:R.s4,usersVoted:["jack1298","carol1522","hd123","bigdolphin"]},{id:"r2",song:R.s5,usersVoted:["jack1298","carol1522","hd123"]}],removeRequests:[]},classical:{id:"classical",title:"Classical music for studying",pictureURL:"/classical.jpg",description:"Relaxing classical music for studying - no lyrics",songIds:["s8"],creator:"joeiscool",admins:[],addRequests:[],removeRequests:[]},jazz:{id:"jazz",title:"Smooth Jazz",pictureURL:"/jazz.jpg",description:"Warm jazz for cool nights",songIds:["s9"],creator:"michelle1721",admins:[],addRequests:[],removeRequests:[]}},k=s(1),N=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).state={searchQuery:"",searchFocused:!1},a.updateSearchQuery=a.updateSearchQuery.bind(Object(d.a)(a)),a}return Object(o.a)(s,[{key:"updateSearchQuery",value:function(e){this.setState({searchQuery:e.target.value})}},{key:"render",value:function(){var e=this,t=Array.from(Object.entries(A)).filter((function(t){var s=Object(y.a)(t,2);s[0];return s[1].title.toLowerCase().includes(e.state.searchQuery.toLowerCase())}));return Object(k.jsxs)(v.a,{className:"d-flex mx-3",style:{width:"305px"},onFocus:function(){e.setState({})},children:[Object(k.jsx)(f.a,{autoFocus:!0,style:{borderColor:this.props.dark?"black":"white"},placeholder:this.props.placeholder,value:this.state.searchQuery,onChange:this.updateSearchQuery}),this.state.searchQuery?Object(k.jsxs)(S.a,{className:"w-auto",style:{position:"absolute",backgroundColor:"white",marginTop:"35px",zIndex:1e3,border:"lightgray 2px solid",borderRadius:"0px 0px 5px 5px"},children:[Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{children:"Title"}),Object(k.jsx)("th",{children:"Creator"})]})}),Object(k.jsxs)("tbody",{children:[0===t.length&&Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{children:Object(k.jsx)("span",{style:{color:"gray"},children:"Nothing found."})}),Object(k.jsx)("td",{})]}),t.map((function(t){var s=Object(y.a)(t,2),a=(s[0],s[1]);return Object(k.jsxs)("tr",{className:"dropdown-item",role:"button",style:{display:"table-row"},onClick:function(){window.location.href="#/playlist/".concat(a.id),e.setState({searchFocused:!1,searchQuery:""})},children:[Object(k.jsx)("td",{children:a.title}),Object(k.jsx)("td",{children:a.creator})]},a.id)}))]})]}):""]})}}]),s}(a.Component),C=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).state={hash:window.location.hash},a}return Object(o.a)(s,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("hashchange",(function(){e.setState({hash:window.location.hash})}))}},{key:"render",value:function(){return Object(k.jsxs)(O.a,{style:{backgroundColor:"#6eaedd"},variant:"dark",className:"museo-300",children:[Object(k.jsx)(O.a.Brand,{href:"#",children:Object(k.jsx)("p",{className:"museo-display-black m-0",children:"Spotify Collaborative Playlists"})}),Object(k.jsx)(x.a,{className:"mr-auto",children:"#/"!==this.state.hash&&Object(k.jsx)(N,{placeholder:"Search for playlists..."})}),this.props.user?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(O.a.Text,{children:["Logged in as",Object(k.jsx)(x.a.Link,{className:"d-inline p-0 ml-2",href:"#/user/".concat(this.props.user.username),style:{textDecorationLine:"underline"},children:Object(k.jsxs)("span",{children:[this.props.user.displayName,Object(k.jsx)(g.a,{fluid:!0,src:"/spotify-collaborative-playlists"+this.props.user.profilePictureURL,style:{maxWidth:"30px",marginLeft:"5px"}})]})})]}),Object(k.jsx)(m.a,{variant:"light",className:"ml-5",onClick:function(){return window.location.reload()},children:"Log out"})]}):Object(k.jsx)(m.a,{variant:"light",onClick:this.props.toggleLoginModal(),children:"Log in with Spotify"})]})}}]),s}(n.a.Component),I=s(76),U=s(53),q=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){return Object(k.jsxs)(j.a,{className:"museo-300",children:[Object(k.jsx)(I.a,{children:Object(k.jsxs)(U.a,{className:"text-left d-flex flex-column justify-content-center align-items-center",style:{height:"50vh"},children:[Object(k.jsx)("h1",{className:"museo-display-black mb-3",children:"Spotify Collaborative Playlists"}),Object(k.jsx)(N,{placeholder:"Search for playlists...",dark:!0})]})}),Object(k.jsxs)(I.a,{children:[Object(k.jsxs)(U.a,{xs:12,children:[Object(k.jsx)("h3",{className:"museo-display-light mb-1",children:"Recommended Playlists"}),Object(k.jsx)("hr",{style:{border:"1px solid lightgrey"},className:"mb-4"})]}),Array.from(Object.entries(A)).slice(0,4).map((function(e){var t=Object(y.a)(e,2),s=(t[0],t[1]);return Object(k.jsx)(U.a,{xs:"3",style:{padding:".5em"},children:Object(k.jsx)(b.b,{to:"/playlist/".concat(s.id),children:Object(k.jsxs)("div",{style:{boxShadow:"1px 1px 10px gray",padding:".75em",borderRadius:"10px",height:"100%"},children:[Object(k.jsx)(g.a,{className:"mb-3",fluid:!0,src:"/spotify-collaborative-playlists"+s.pictureURL}),Object(k.jsx)("p",{className:"mb-1 museo-700",children:s.title}),Object(k.jsx)("p",{className:"mb-1",children:w[s.creator].displayName}),Object(k.jsxs)("p",{className:"mb-1",children:[s.songIds.length," ",1===s.songIds.length?"song":"songs"]})]})})},s.id)}))]})]})}}]),s}(n.a.Component);function L(e){return"".concat(Math.floor(e/60),":").concat((e%60).toString().padStart(2,"0"))}function H(e){var t,s,a=Object(p.e)(),n=A[e.match.params.playlistId],r=w[n.creator],i=n.songIds.map((function(e){return R[e]})),c=function(){return a.push({pathname:"/playlist/".concat(n.id,"/requests"),state:{showAddSong:!0}})},o=function(){return a.push({pathname:"/playlist/".concat(n.id,"/requests"),state:{showRemoveSong:!0}})};return Object(k.jsxs)(j.a,{children:[Object(k.jsxs)(I.a,{className:"my-4",children:[Object(k.jsx)(U.a,{xs:4,children:Object(k.jsx)(g.a,{src:"/spotify-collaborative-playlists"+n.pictureURL,alt:"Album cover",fluid:!0})}),Object(k.jsxs)(U.a,{xs:4,children:[Object(k.jsx)("p",{className:"museo-display-light m-0",children:"Playlist"}),Object(k.jsx)("h1",{className:"museo-display-black",children:n.title}),Object(k.jsxs)("p",{className:"museo-300 mb-0",children:["Created by ",Object(k.jsx)(b.b,{to:"/user/".concat(r.username),children:r.displayName})]}),Object(k.jsxs)("p",{className:"museo-300 italic",children:[i.length," ",1===i.length?"song":"songs",", ",(s=i.map((function(e){return e.duration})),t=s.reduce((function(e,t){return e+t}),0),"".concat(Math.floor(t/3600)," hr ").concat(Math.floor(t%3600/60)," min"))]}),Object(k.jsx)(m.a,{variant:"outline-dark",className:"museo-300",onClick:function(){var e=window.location.href;navigator.clipboard.writeText(e).then((function(){alert("Playlist link copied to clipboard!")}))},children:"Share"})]}),Object(k.jsxs)(U.a,{xs:4,className:"text-right",children:[r.username!==e.loggedInUsername&&Object(k.jsxs)("div",{children:[Object(k.jsx)(m.a,{variant:"outline-primary",className:"museo-300 mb-2",onClick:void 0===e.loggedInUsername?e.toggleLoginModal(c):c,children:"Request to add a song"}),Object(k.jsx)("br",{}),Object(k.jsx)(m.a,{variant:"outline-danger",className:"museo-300 mb-2",onClick:void 0===e.loggedInUsername?e.toggleLoginModal(o):o,children:"Request to remove a song"}),Object(k.jsxs)(b.b,{to:"/playlist/".concat(n.id,"/requests"),children:[Object(k.jsx)(m.a,{variant:"outline-secondary",className:"museo-300 mb-2",children:"View song requests"}),Object(k.jsx)("br",{})]}),Object(k.jsx)("p",{className:"museo-300 mb-2",children:"If you're an admin of this playlist, log in to manage song requests."})]}),r.username===e.loggedInUsername&&Object(k.jsxs)("div",{children:[Object(k.jsxs)(b.b,{to:"/playlist/".concat(n.id,"/requests"),children:[Object(k.jsx)(m.a,{variant:"primary",className:"museo-300 mb-2",children:"Manage Song Requests"}),Object(k.jsx)("br",{})]}),Object(k.jsxs)(b.b,{to:"/playlist/".concat(n.id,"/admins"),children:[Object(k.jsx)(m.a,{variant:"outline-secondary",className:"museo-300 mb-2",children:"Manage Administrators"}),Object(k.jsx)("br",{})]})]})]})]}),Object(k.jsx)(I.a,{children:Object(k.jsx)(U.a,{children:Object(k.jsxs)(S.a,{striped:!0,bordered:!0,hover:!0,className:"museo-300",children:[Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{children:"#"}),Object(k.jsx)("th",{children:"Title"}),Object(k.jsx)("th",{children:"Artist"}),Object(k.jsx)("th",{children:"Album"}),Object(k.jsx)("th",{children:"Date Added"}),Object(k.jsx)("th",{children:"Duration"})]})}),Object(k.jsx)("tbody",{children:Array.from(i.entries()).map((function(e){var t=Object(y.a)(e,2),s=t[0],a=t[1];return Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{children:s+1}),Object(k.jsx)("td",{children:a.title}),Object(k.jsx)("td",{children:a.artist}),Object(k.jsx)("td",{children:a.album}),Object(k.jsx)("td",{children:"2021-03-30"}),Object(k.jsx)("td",{children:L(a.duration)})]},a.id)}))})]})})})]})}s(68);var F=s(77),M=(s(69),function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){var e=this;return Object(k.jsxs)(S.a,{striped:!0,bordered:!0,hover:!0,children:[Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{className:"customHeader-1",children:"#"}),Object(k.jsx)("th",{className:"customHeader-2",children:"Title"}),Object(k.jsx)("th",{className:"customHeader-2",children:"Artist"}),Object(k.jsx)("th",{className:"customHeader-2",children:"Album"}),Object(k.jsx)("th",{className:"customHeader-1",children:"Date Added"}),Object(k.jsx)("th",{className:"customHeader-1",children:"Duration"}),Object(k.jsx)("th",{className:"customHeader-1",children:"Votes"}),Object(k.jsx)("th",{className:"customHeader-2",children:"Actions"})]})}),Object(k.jsx)("tbody",{children:Array.from(this.props.requests.entries()).map((function(t){var s=Object(y.a)(t,2),a=s[0],n=s[1];return Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{children:a+1}),Object(k.jsx)("td",{children:n.song.title}),Object(k.jsx)("td",{children:n.song.artist}),Object(k.jsx)("td",{children:n.song.album}),Object(k.jsx)("td",{children:"2021-03-30"}),Object(k.jsx)("td",{children:L(n.song.duration)}),Object(k.jsx)("td",{children:n.usersVoted.length}),Object(k.jsx)("td",{children:e.props.adminPermissions?Object(k.jsx)(m.a,{variant:"primary",onClick:e.props.handleAcceptRequest(n.song.id,n.id),children:"Accept Request"}):void 0!==e.props.loggedInUsername&&n.usersVoted.includes(e.props.loggedInUsername)?Object(k.jsx)(m.a,{variant:"outline-secondary",onClick:e.props.removeVote(n.id),children:"Remove Vote for Request"}):Object(k.jsx)(m.a,{variant:"outline-secondary",onClick:void 0===e.props.loggedInUsername?e.props.toggleLoginModal(e.props.addVote(n.id)):e.props.addVote(n.id),children:"Vote for Request"})})]},n.id)}))})]})}}]),s}(a.Component)),P={"#":1,Title:2,Artist:2,Album:2,"Date Added":2,Duration:1,Actions:2},Q=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).state={showAddSong:void 0!==a.props.location.state&&!0===a.props.location.state.showAddSong,showRemoveSong:void 0!==a.props.location.state&&!0===a.props.location.state.showRemoveSong,addSearchQuery:"",selectedAddSongId:"",addSearchFocused:!1,removeSongIds:[],recentAddSongRequest:!1,recentRemoveSongRequest:!1},a.toggleAddSong=a.toggleAddSong.bind(Object(d.a)(a)),a.toggleRemoveSong=a.toggleRemoveSong.bind(Object(d.a)(a)),a.updateSearchQuery=a.updateSearchQuery.bind(Object(d.a)(a)),a.handleAcceptAddRequest=a.handleAcceptAddRequest.bind(Object(d.a)(a)),a.handleAcceptRemoveRequest=a.handleAcceptRemoveRequest.bind(Object(d.a)(a)),a.removeVote=a.removeVote.bind(Object(d.a)(a)),a.addVote=a.addVote.bind(Object(d.a)(a)),a}return Object(o.a)(s,[{key:"toggleAddSong",value:function(){this.setState((function(e){return{addSearchQuery:"",addSearchFocused:!1,selectedAddSongId:"",showAddSong:!e.showAddSong}}))}},{key:"toggleRemoveSong",value:function(){this.setState((function(e){return{removeSongIds:[],showRemoveSong:!e.showRemoveSong}}))}},{key:"removeVote",value:function(e){var t=this;return function(s){return function(){if(void 0!==t.props.loggedInUsername){var a=(e?A[t.props.match.params.playlistId].addRequests:A[t.props.match.params.playlistId].removeRequests).find((function(e){return e.id===s}));void 0!==a&&(a.usersVoted=a.usersVoted.filter((function(e){return"hci2021"!==e})),t.forceUpdate())}}}}},{key:"addVote",value:function(e){var t=this;return function(s){return function(){if(void 0!==t.props.loggedInUsername){var a=(e?A[t.props.match.params.playlistId].addRequests:A[t.props.match.params.playlistId].removeRequests).find((function(e){return e.id===s}));void 0===a||a.usersVoted.includes("hci2021")||(a.usersVoted.push("hci2021"),t.forceUpdate())}}}}},{key:"updateSearchQuery",value:function(e){this.setState({addSearchQuery:e.target.value})}},{key:"handleAcceptAddRequest",value:function(e,t){var s=this;return function(){var a=A[s.props.match.params.playlistId];a.addRequests=a.addRequests.filter((function(e){return e.id!==t})),a.songIds=a.songIds.concat(e),A[s.props.match.params.playlistId]=a,s.forceUpdate()}}},{key:"handleAcceptRemoveRequest",value:function(e,t){var s=this;return function(){var a=A[s.props.match.params.playlistId];a.removeRequests=a.removeRequests.filter((function(e){return e.id!==t})),a.songIds=a.songIds.filter((function(t){return t!==e})),A[s.props.match.params.playlistId]=a,s.forceUpdate()}}},{key:"render",value:function(){var e=this,t=A[this.props.match.params.playlistId],s=w[t.creator],a=t.songIds.map((function(e){return R[e]}));return Object(k.jsxs)(j.a,{className:"museo-300",children:[Object(k.jsx)(I.a,{className:"mt-4",children:Object(k.jsx)(U.a,{xs:12,children:Object(k.jsx)(b.b,{to:"/playlist/".concat(t.id),children:"\u2190 Go back to playlist"})})}),Object(k.jsxs)(I.a,{className:"mb-4",children:[Object(k.jsxs)(U.a,{xs:8,children:[Object(k.jsx)("h1",{className:"museo-display-black",children:"Song Requests"}),"Playlist: ",Object(k.jsx)(b.b,{to:"/playlist/".concat(t.id),children:t.title})," by ",Object(k.jsx)(b.b,{to:"/user/".concat(s.username),children:s.displayName})]}),Object(k.jsx)(U.a,{xs:4,className:"text-right",children:s.username!==this.props.loggedInUsername&&Object(k.jsxs)("div",{children:[Object(k.jsx)(m.a,{variant:"outline-primary",className:"museo-300 mb-2",onClick:void 0===this.props.loggedInUsername?this.props.toggleLoginModal((function(){return e.props.history.replace({state:{showAddSong:!0}})})):this.toggleAddSong,children:"Request to add a song"}),Object(k.jsx)("br",{}),Object(k.jsx)(m.a,{variant:"outline-danger",className:"museo-300 mb-2",onClick:void 0===this.props.loggedInUsername?this.props.toggleLoginModal((function(){return e.props.history.replace({state:{showRemoveSong:!0}})})):this.toggleRemoveSong,children:"Request to remove a song"})]})})]}),Object(k.jsx)(I.a,{className:"mb-4",children:Object(k.jsxs)(U.a,{children:[Object(k.jsx)("h2",{className:"museo-display-light",children:"Add Song Requests"}),Object(k.jsx)(F.a,{variant:"success",show:this.state.recentAddSongRequest,children:"Your request to add a song from the playlist was made successfully."}),Object(k.jsx)(M,{handleAcceptRequest:this.handleAcceptAddRequest,adminPermissions:s.username===this.props.loggedInUsername,requests:t.addRequests,removeVote:this.removeVote(!0),addVote:this.addVote(!0),loggedInUsername:this.props.loggedInUsername,toggleLoginModal:this.props.toggleLoginModal})]})}),Object(k.jsx)(I.a,{className:"mb-4",children:Object(k.jsxs)(U.a,{children:[Object(k.jsx)("h2",{className:"museo-display-light",children:"Remove Song Requests"}),Object(k.jsx)(F.a,{variant:"success",show:this.state.recentRemoveSongRequest,children:"Your request to remove a song from the playlist was made successfully."}),Object(k.jsx)(M,{handleAcceptRequest:this.handleAcceptRemoveRequest,adminPermissions:s.username===this.props.loggedInUsername,requests:t.removeRequests,removeVote:this.removeVote(!1),addVote:this.addVote(!1),loggedInUsername:this.props.loggedInUsername,toggleLoginModal:this.props.toggleLoginModal})]})}),Object(k.jsxs)(u.a,{show:this.state.showAddSong,animation:!1,dialogClassName:"larger-width-modal museo-300",backdrop:"static",children:[Object(k.jsx)(u.a.Header,{children:Object(k.jsx)(u.a.Title,{className:"museo-display-black",children:"Request to add a song"})}),Object(k.jsx)(u.a.Body,{className:"px-3",children:Object(k.jsxs)(v.a,{onFocus:function(){return e.setState({addSearchFocused:!0})},children:[Object(k.jsx)(f.a,{autoFocus:!0,className:"my-2 w-auto",placeholder:"Type the song title here...",value:this.state.addSearchQuery,onChange:this.updateSearchQuery}),!this.state.addSearchQuery||this.state.selectedAddSongId&&!this.state.addSearchFocused?"":Object(k.jsxs)(S.a,{className:"mx-3 w-auto",children:[Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{children:"Song"}),Object(k.jsx)("th",{children:"Artist"}),Object(k.jsx)("th",{children:"Album"}),Object(k.jsx)("th",{children:"Duration"})]})}),Object(k.jsx)("tbody",{children:Array.from(Object.entries(R)).filter((function(t){var s=Object(y.a)(t,2);s[0];return s[1].title.toLowerCase().includes(e.state.addSearchQuery.toLowerCase())})).map((function(t){var s=Object(y.a)(t,2),a=(s[0],s[1]);return Object(k.jsxs)("tr",{className:"dropdown-item",role:"button",style:{display:"table-row"},onClick:function(){return e.setState({selectedAddSongId:a.id,addSearchFocused:!1})},children:[Object(k.jsx)("td",{children:a.title}),Object(k.jsx)("td",{children:a.artist}),Object(k.jsx)("td",{children:a.album}),Object(k.jsx)("td",{children:L(a.duration)})]},a.id)}))})]}),this.state.selectedAddSongId?R[this.state.selectedAddSongId].title:""]})}),Object(k.jsxs)(u.a.Footer,{style:{justifyContent:"flex-end"},children:[Object(k.jsx)(m.a,{variant:"outline-secondary",onClick:this.toggleAddSong,children:"Cancel and Close"}),this.state.selectedAddSongId?Object(k.jsx)(m.a,{variant:"primary",onClick:function(){A[t.id].addRequests.push({id:"r".concat(A[t.id].addRequests.length+1),song:R[e.state.selectedAddSongId],usersVoted:["hci2021"]}),e.setState({addSearchQuery:"",addSearchFocused:!1,selectedAddSongId:"",showAddSong:!1,recentAddSongRequest:!0}),setTimeout(function(){this.setState({recentAddSongRequest:!1})}.bind(e),3e3)},children:"Request this song"}):""]})]}),Object(k.jsxs)(u.a,{show:this.state.showRemoveSong,animation:!1,dialogClassName:"larger-width-modal museo-300",backdrop:"static",children:[Object(k.jsx)(u.a.Header,{children:Object(k.jsx)(u.a.Title,{className:"museo-display-black",children:"Request to remove a song"})}),Object(k.jsx)(u.a.Body,{children:Object(k.jsxs)(S.a,{striped:!0,bordered:!0,hover:!0,children:[Object(k.jsx)("thead",{children:Object(k.jsx)("tr",{children:Array.from(Object.entries(P)).map((function(e){var t=Object(y.a)(e,2),s=t[0],a=t[1];return Object(k.jsx)("th",{className:"customHeader-"+a,children:s},s)}))})}),Object(k.jsx)("tbody",{children:Array.from(a.entries()).map((function(t){var s=Object(y.a)(t,2),a=s[0],n=s[1];return e.state.removeSongIds.includes(n.id)?Object(k.jsx)("tr",{children:Object(k.jsxs)("td",{colSpan:Object.keys(P).length,children:["You requested to remove ",n.title,".\xa0",Object(k.jsx)(m.a,{variant:"outline-secondary",onClick:function(){return e.setState((function(e){return{removeSongIds:e.removeSongIds.filter((function(e){return e!==n.id}))}}))},children:"Undo"})]})},n.id):Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{children:a+1}),Object(k.jsx)("td",{children:n.title}),Object(k.jsx)("td",{children:n.artist}),Object(k.jsx)("td",{children:n.album}),Object(k.jsx)("td",{children:"2021-03-30"}),Object(k.jsx)("td",{children:L(n.duration)}),Object(k.jsx)("td",{children:Object(k.jsx)(m.a,{variant:"outline-danger",onClick:function(){return e.setState((function(e){return e.removeSongIds.includes(n.id)?{removeSongIds:e.removeSongIds}:{removeSongIds:e.removeSongIds.concat(n.id)}}))},children:"Request to remove"})})]},n.id)}))})]})}),Object(k.jsx)(u.a.Footer,{style:{justifyContent:"flex-end"},children:Object(k.jsx)(m.a,{variant:"primary",onClick:function(){e.state.removeSongIds.forEach((function(e){A[t.id].removeRequests.push({id:"r".concat(A[t.id].removeRequests.length+1),song:R[e],usersVoted:["hci2021"]})})),e.setState({addSearchQuery:"",addSearchFocused:!1,removeSongIds:[],showAddSong:!1,recentRemoveSongRequest:!0}),setTimeout(function(){this.setState({recentRemoveSongRequest:!1})}.bind(e),3e3),e.toggleRemoveSong()},children:"Finish requesting song removals"})})]})]})}}]),s}(n.a.Component),V=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){var e=w[this.props.match.params.username],t=e.playlistIds.map((function(e){return A[e]}));return Object(k.jsxs)(j.a,{className:"museo-300",children:[Object(k.jsxs)(I.a,{className:"my-4",children:[Object(k.jsx)(U.a,{xs:4,children:Object(k.jsx)(g.a,{src:"/spotify-collaborative-playlists"+e.profilePictureURL,alt:"".concat(e.displayName,"'s profile"),fluid:!0})}),Object(k.jsxs)(U.a,{xs:8,children:[Object(k.jsx)("h1",{className:"museo-display-black",children:e.displayName}),Object(k.jsxs)("p",{className:"m-0",children:[e.followers," followers"]}),Object(k.jsxs)("p",{children:[t.length," playlists"]})]})]}),Object(k.jsx)(I.a,{children:Object(k.jsxs)(U.a,{children:[Object(k.jsx)("h3",{className:"museo-display-light",children:"User Playlists"}),Object(k.jsxs)(S.a,{striped:!0,bordered:!0,hover:!0,className:"museo-300",children:[Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{children:"Title"}),Object(k.jsx)("th",{children:"Date Created"}),Object(k.jsx)("th",{children:"Number of Songs"}),Object(k.jsx)("th",{children:"Duration"})]})}),Object(k.jsx)("tbody",{children:Array.from(Object.entries(A)).filter((function(t){var s=Object(y.a)(t,2);s[0];return s[1].creator===e.username})).map((function(e){var t=Object(y.a)(e,2),s=(t[0],t[1]);return Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{children:Object(k.jsx)(b.b,{to:"/playlist/".concat(s.id),children:s.title})}),Object(k.jsx)("td",{children:"2021-03-30"}),Object(k.jsx)("td",{children:s.songIds.length}),Object(k.jsx)("td",{children:"9 min"})]},s.id)}))})]})]})})]})}}]),s}(n.a.Component),T=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).state={showHide:!1,showHideRemove:!1,searchQuery:"",selectedAdminUsername:"",searchFocused:!1,removeAdminUsernames:[]},a.handleModalShowHide=a.handleModalShowHide.bind(Object(d.a)(a)),a.updateSearchQuery=a.updateSearchQuery.bind(Object(d.a)(a)),a}return Object(o.a)(s,[{key:"handleModalShowHide",value:function(){this.setState({showHide:!this.state.showHide})}},{key:"updateSearchQuery",value:function(e){this.setState({searchQuery:e.target.value})}},{key:"render",value:function(){var e=this,t=A[this.props.match.params.playlistId],s=w[t.creator];return Object(k.jsxs)(j.a,{className:"museo-300",children:[Object(k.jsx)(I.a,{className:"my-4",children:Object(k.jsxs)(U.a,{xs:12,children:[Object(k.jsx)(b.b,{to:"/playlist/".concat(t.id),children:"\u2190 Go back to playlist"}),Object(k.jsx)("h1",{className:"museo-display-black",children:"Manage Administrators"}),Object(k.jsxs)("p",{children:["Playlist: ",Object(k.jsx)(b.b,{to:"/playlist/".concat(t.id),children:t.title})," by ",Object(k.jsx)(b.b,{to:"/user/".concat(s.username),children:s.displayName})]})]})}),Object(k.jsx)(I.a,{className:"mb-4",children:Object(k.jsxs)(U.a,{xs:12,children:[Object(k.jsx)("h3",{className:"museo-display-light",children:"Current Administrators"}),t.admins.length>0&&Object(k.jsx)("ul",{children:t.admins.map((function(e){return Object(k.jsx)("li",{children:Object(k.jsx)("p",{className:"m-0",children:e})},e)}))}),!(t.admins.length>0)&&Object(k.jsx)("p",{children:"There are no admins for this playlist. Add one to help manage requests."})]})}),Object(k.jsx)(I.a,{className:"mb-2",children:Object(k.jsx)(U.a,{xs:12,children:Object(k.jsx)(m.a,{variant:"primary",onClick:function(){return e.handleModalShowHide()},children:"Add new Administrator"})})}),Object(k.jsx)(I.a,{children:Object(k.jsx)(U.a,{xs:12,children:Object(k.jsx)(m.a,{variant:"danger",onClick:function(){return e.setState({showHideRemove:!0})},children:"Remove an Administrator"})})}),Object(k.jsxs)(u.a,{show:this.state.showHide,backdrop:"static",dialogClassName:"museo-300",children:[Object(k.jsx)(u.a.Header,{onClick:function(){return e.handleModalShowHide()},children:Object(k.jsx)(u.a.Title,{className:"museo-display-black",children:"Add an Administrator"})}),Object(k.jsx)(u.a.Body,{children:Object(k.jsxs)(v.a,{onFocus:function(){return e.setState({searchFocused:!0})},children:[Object(k.jsx)(f.a,{autoFocus:!0,className:"mx-3 my-2 w-auto",placeholder:"Type a username...",value:this.state.searchQuery,onChange:this.updateSearchQuery}),!this.state.searchQuery||this.state.selectedAdminUsername&&!this.state.searchFocused?"":Object(k.jsxs)(S.a,{className:"mx-3 w-auto",children:[Object(k.jsx)("thead",{children:Object(k.jsx)("tr",{children:Object(k.jsx)("th",{children:"Users"})})}),Object(k.jsx)("tbody",{children:Array.from(Object.entries(w)).filter((function(s){var a=Object(y.a)(s,2),n=(a[0],a[1]);return n.username.toLowerCase().includes(e.state.searchQuery.toLowerCase())&&!t.admins.includes(n.username)})).map((function(t){var s=Object(y.a)(t,2),a=(s[0],s[1]);return Object(k.jsx)("tr",{className:"dropdown-item",role:"button",style:{display:"table-row"},onClick:function(){e.setState({selectedAdminUsername:a.username,searchFocused:!1}),console.log(a.username)},children:Object(k.jsx)("td",{children:a.username})})}))})]}),this.state.selectedAdminUsername?w[this.state.selectedAdminUsername].username:""]})}),Object(k.jsxs)(u.a.Footer,{style:{justifyContent:"flex-end"},children:[Object(k.jsx)(m.a,{variant:"secondary",onClick:function(){e.setState({searchQuery:"",searchFocused:!1,selectedAdminUsername:"",showHide:!1})},children:"Close this window"}),this.state.selectedAdminUsername?Object(k.jsx)(m.a,{variant:"primary",onClick:function(){A[t.id].admins.push(w[e.state.selectedAdminUsername].username),e.setState({searchQuery:"",searchFocused:!1,selectedAdminUsername:"",showHide:!1})},children:"Add Administrator"}):""]})]}),Object(k.jsxs)(u.a,{show:this.state.showHideRemove,backdrop:"static",dialogClassName:"museo-300 larger-width-modal",children:[Object(k.jsx)(u.a.Header,{children:Object(k.jsx)(u.a.Title,{className:"museo-display-black",children:"Remove an Administrator"})}),Object(k.jsx)(u.a.Body,{children:Object(k.jsxs)(S.a,{striped:!0,bordered:!0,hover:!0,children:[Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{className:"width-50",children:"Username"}),Object(k.jsx)("th",{className:"width-50",children:"Actions"})]})}),Object(k.jsx)("tbody",{children:t.admins.map((function(t){return e.state.removeAdminUsernames.includes(t)?Object(k.jsx)("tr",{children:Object(k.jsxs)("td",{colSpan:2,children:["You removed ",t,".\xa0",Object(k.jsx)(m.a,{variant:"outline-secondary",onClick:function(){return e.setState((function(e){return{removeAdminUsernames:e.removeAdminUsernames.filter((function(e){return e!==t}))}}))},children:"Undo"})]})},t):Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{children:t}),Object(k.jsx)("td",{children:Object(k.jsx)(m.a,{variant:"outline-danger",onClick:function(){return e.setState((function(e){return{removeAdminUsernames:e.removeAdminUsernames.concat(t)}}))},children:"Remove administrator"})})]},t)}))})]})}),Object(k.jsxs)(u.a.Footer,{style:{justifyContent:"flex-end"},children:[Object(k.jsx)(m.a,{variant:"secondary",onClick:function(){e.setState({removeAdminUsernames:[],showHideRemove:!1})},children:"Cancel and close this window"}),this.state.removeAdminUsernames?Object(k.jsx)(m.a,{variant:"primary",onClick:function(){A[t.id].admins=t.admins.filter((function(t){return!e.state.removeAdminUsernames.includes(t)})),e.setState({removeAdminUsernames:[],showHideRemove:!1})},children:"Finish removing administrators"}):""]})]})]})}}]),s}(n.a.Component),B=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).state={showHide:!1,loggedInUser:null,inputUsername:"",inputPassword:"",error:""},a.handleModalShowHide=a.handleModalShowHide.bind(Object(d.a)(a)),a.handleLoginSubmission=a.handleLoginSubmission.bind(Object(d.a)(a)),a}return Object(o.a)(s,[{key:"handleModalShowHide",value:function(e){var t=this;return function(){t.setState((function(t){return{showHide:!t.showHide,loginCallback:e}}))}}},{key:"handleLoginInput",value:function(e){var t=this;return"username"===e?function(e){t.setState({inputUsername:e.target.value,error:""})}:function(e){t.setState({inputPassword:e.target.value,error:""})}}},{key:"handleLoginSubmission",value:function(){this.state.inputUsername&&this.state.inputPassword?"password"===this.state.inputPassword.toLowerCase()&&"hci2021"===this.state.inputUsername.toLowerCase()?(void 0!==this.state.loginCallback&&this.state.loginCallback(),this.setState({loggedInUser:w.hci2021,showHide:!1,inputPassword:"",inputUsername:"",loginCallback:void 0})):"hci2021"!==this.state.inputUsername.toLowerCase()?this.setState({inputPassword:"",inputUsername:"",error:"username"}):this.setState({inputPassword:"",error:"password"}):this.setState({error:"not-filled"})}},{key:"render",value:function(){var e=this,t=this.state.loggedInUser;return Object(k.jsxs)("div",{children:[Object(k.jsx)(C,{user:t,toggleLoginModal:this.handleModalShowHide}),Object(k.jsxs)(j.a,{fluid:!0,children:[Object(k.jsxs)(b.a,{children:[Object(k.jsx)(p.a,{path:"/",component:q,exact:!0}),Object(k.jsx)(p.a,{path:"/playlist/:playlistId",component:function(s){var a=s.match;return Object(k.jsx)(H,{loggedInUsername:t?t.username:void 0,match:a,toggleLoginModal:e.handleModalShowHide})},exact:!0}),Object(k.jsx)(p.a,{path:"/playlist/:playlistId/requests",component:function(s){var a=s.match,n=s.location,r=s.history;return Object(k.jsx)(Q,{loggedInUsername:t?t.username:void 0,match:a,location:n,history:r,toggleLoginModal:e.handleModalShowHide})},exact:!0}),Object(k.jsx)(p.a,{path:"/user/:username",component:V,exact:!0}),Object(k.jsx)(p.a,{path:"/playlist/:playlistId/admins",component:T,exact:!0})]}),Object(k.jsxs)(u.a,{show:this.state.showHide,animation:!1,backdrop:"static",dialogClassName:"museo-300",children:[Object(k.jsx)(u.a.Header,{onClick:function(){return e.handleModalShowHide()},children:Object(k.jsx)(u.a.Title,{className:"museo-display-black",children:"Log into your account"})}),Object(k.jsx)(u.a.Body,{children:Object(k.jsxs)(v.a,{children:[Object(k.jsxs)(v.a.Group,{controlId:"formUsername",children:[Object(k.jsx)(v.a.Label,{children:"Username"}),Object(k.jsx)(v.a.Control,{type:"text",placeholder:"Enter username...",value:this.state.inputUsername,onChange:this.handleLoginInput("username"),isInvalid:"username"===this.state.error}),Object(k.jsx)(v.a.Control.Feedback,{type:"invalid",children:"Username not found, please try again."})]}),Object(k.jsxs)(v.a.Group,{controlId:"formPassword",children:[Object(k.jsx)(v.a.Label,{children:"Password"}),Object(k.jsx)(v.a.Control,{type:"password",placeholder:"Enter password...",value:this.state.inputPassword,onChange:this.handleLoginInput("password"),isInvalid:"password"===this.state.error}),Object(k.jsx)(v.a.Control.Feedback,{type:"invalid",children:"Incorrect password, please try again."})]}),"not-filled"===this.state.error&&Object(k.jsx)("p",{className:"text-danger",style:{fontSize:"80%",marginBottom:0},children:"Please fill out all login fields."})]})}),Object(k.jsxs)(u.a.Footer,{style:{justifyContent:"flex-end"},children:[Object(k.jsx)(m.a,{variant:"primary",onClick:this.handleLoginSubmission,children:"Log in"}),Object(k.jsx)(m.a,{variant:"outline-danger",onClick:function(){e.setState({inputPassword:"",inputUsername:"",showHide:!1,loginCallback:void 0})},children:"Close this window"})]})]})]})]})}}]),s}(n.a.Component),D=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,82)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,i=t.getTTFB;s(e),a(e),n(e),r(e),i(e)}))};i.a.render(Object(k.jsx)(n.a.StrictMode,{children:Object(k.jsx)(B,{})}),document.getElementById("root")),D()}},[[70,1,2]]]);
//# sourceMappingURL=main.f8ffa97f.chunk.js.map